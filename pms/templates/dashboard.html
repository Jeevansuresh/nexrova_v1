{% extends "base.html" %}

{% block title %}Dashboard - Chennai BnB PMS{% endblock %}

{% block content %}
<h1 style="margin-bottom: 2rem;">Dashboard</h1>

<div class="stats-grid">
    <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <h3>{{ total_rooms }}</h3>
        <p>Total Rooms</p>
    </div>

    <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
        <h3>{{ occupied_rooms }}</h3>
        <p>Occupied Rooms</p>
    </div>

    <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
        <h3>{{ occupancy_rate|round(1) }}%</h3>
        <p>Occupancy Rate</p>
    </div>

    <div class="stat-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
        <h3>{{ available_rooms }}</h3>
        <p>Available Rooms</p>
    </div>
</div>

{% if maintenance_rooms > 0 %}
<div class="card" style="background: #fff3cd; border-left: 4px solid #f39c12;">
    <h2 style="color: #856404;">⚠️ Maintenance Alert</h2>
    <p style="color: #856404; margin-top: 0.5rem;">
        {{ maintenance_rooms }} room(s) currently under maintenance
    </p>
</div>
{% endif %}

<div class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));">
    <div class="card">
        <h2 style="margin-bottom: 1rem;">Today's Check-ins</h2>
        <h3 style="color: #3498db;">{{ check_ins }}</h3>
        <p style="color: #666;">guests arriving today</p>
    </div>

    <div class="card">
        <h2 style="margin-bottom: 1rem;">Today's Check-outs</h2>
        <h3 style="color: #e74c3c;">{{ check_outs }}</h3>
        <p style="color: #666;">guests departing today</p>
    </div>
</div>

{% if checked_in_guests|length > 0 %}
<div class="card">
    <h2 style="margin-bottom: 1rem;">Currently Checked-In Guests ({{ checked_in_guests|length }})</h2>
    <table>
        <thead>
            <tr>
                <th>Guest Name</th>
                <th>Room</th>
                <th>Check-in Date</th>
                <th>Check-out Date</th>
                <th>Contact</th>
            </tr>
        </thead>
        <tbody>
            {% for guest in checked_in_guests %}
            <tr>
                <td><strong>{{ guest.guest_name }}</strong></td>
                <td>{{ guest.room_number }} ({{ guest.room_type }})</td>
                <td>{{ guest.check_in }}</td>
                <td>{{ guest.check_out }}</td>
                <td>{{ guest.guest_phone }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

<div class="card">
    <h2 style="margin-bottom: 1rem;">Quick Actions</h2>
    <a href="/new-booking" class="btn btn-success">New Booking</a>
    <a href="/rooms" class="btn" style="margin-left: 1rem;">Manage Rooms</a>
    <a href="/bookings" class="btn" style="margin-left: 1rem;">View All Bookings</a>
    <a href="/guests" class="btn" style="margin-left: 1rem;">View Guests</a>
</div>
{% endblock %}
